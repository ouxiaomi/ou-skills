---
name: git-commit-message
description: 读取暂存区变更（git diff --cached）并参考 git log 的最近提交风格生成提交消息。适用于用户让你读取暂存区、总结暂存变更或建议提交消息的场景。
---

# Git 提交消息

根据暂存区变更生成单行提交消息，并匹配仓库近期的提交风格与语言。

## 工作流程

1. **确认暂存状态**
   - 执行 `git status --short`
   - 若无暂存内容，说明情况并停止；询问是否需要暂存文件或改用未暂存 diff

2. **读取暂存变更**
   - 执行 `git diff --cached`（变更较大时可加 `--stat`）
   - 仅基于暂存区内容生成消息

3. **匹配仓库风格**
   - 执行 `git log -5 --pretty=format:%s`
   - 按最近提交的主流前缀/风格（如 `feat:`、`fix:`、`docx:`）与语言习惯撰写

4. **起草消息**
   - 选最关键的改动作为动词，保持简洁
   - 若暂存包含多类不相关改动，建议拆分提交或给出合并但清晰的概述

5. **回复**
   - 只输出推荐的提交消息（单行）
   - 如存在未暂存改动，可补充一句提醒说明不会包含
